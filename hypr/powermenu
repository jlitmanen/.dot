#!/bin/bash

# Fuzzel Power Menu
# A simple power menu script for fuzzel

# Define menu options
options="â» Shutdown\nâŸ² Reboot\nâ¾ Suspend\nâ¾ Hibernate\nðŸ”’ Lock\nâŽŒ Logout"

# Show menu and get selection
selected=$(echo -e "$options" | fuzzel --dmenu --prompt="Power Menu: ")

# Execute selected action
case "$selected" in
    "â» Shutdown")
        systemctl poweroff
        ;;
    "âŸ² Reboot")
        systemctl reboot
        ;;
    "â¾ Suspend")
        systemctl suspend
        ;;
    "â¾ Hibernate")
        systemctl hibernate
        ;;
    "ðŸ”’ Lock")
        # Try common Wayland lock commands
        if command -v swaylock &> /dev/null; then
            swaylock
        elif command -v waylock &> /dev/null; then
            waylock
        elif command -v hyprlock &> /dev/null; then
            hyprlock
        else
            notify-send "Lock Error" "No lock screen found"
        fi
        ;;
    "âŽŒ Logout")
        # Detect compositor and logout
        if [ "$XDG_CURRENT_DESKTOP" = "sway" ]; then
            swaymsg exit
        elif [ "$XDG_CURRENT_DESKTOP" = "Hyprland" ]; then
            hyprctl dispatch exit
        elif [ "$XDG_CURRENT_DESKTOP" = "wayfire" ]; then
            killall wayfire
        else
            notify-send "Logout Error" "Could not detect compositor"
        fi
        ;;
esac
